<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Week 8 - Darsligi</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="css/week8.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
<div class="container-fluid">
<form id="myform">
    <div class="formtitle">Contact Form</div>
    <div id="progressbar"></div>
    <table>
        <tr>
            <td class="formlabel">First Name: </td>
            <td class="formelement">
                <input name="first_name"  class="form-control" placeholder="Your First Name" type="text">
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td class="formlabel">Last Name: </td>
            <td class="formelement">
                <input name="last_name" class="form-control" placeholder="Your Last Name" type="text">
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td class="formlabel">Email Address: </td>
            <td class="formelement">
                <input name="email" class="form-control" placeholder="Your Email Address" type="text">
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td class="formlabel">Select Your Location:</td>
            <td class="formelement">
                <select class="custom-select" name="location" style="width:200px;">
                    <optgroup label="East">
                        <option>Ferghana</option>
                        <option>Andizhan</option>
                        <option>Namangan</option>
                    </optgroup>
                    <optgroup label="West">
                        <option>Samarkand</option>
                        <option>Bukhara</option>
                        <option>Navoi</option>
                    </optgroup>
                    <optgroup label="North">
                        <option>Tashkent</option>
                        <option>Syrdaryo</option>
                        <option>Jizzah</option>
                    </optgroup>
                </select>
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td class="formlabel">
                Gender:
            </td>
            <td class="formelement">
                <fieldset>
                    <legend>Select Gender: </legend>
                    <label for="radio_male">Male</label>
                    <input type="radio" name="gender" id="radio_male">
                    <label for="radio_female">Female</label>
                    <input type="radio" name="gender" id="radio_female">
                </fieldset>
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td class="formlabel">
                Education:
            </td>
            <td class="formelement">
                <fieldset>
                    <legend>Select Your Highest Degree: </legend>
                    <label for="checkbox_master">Masters</label>
                    <input type="checkbox" name="degree" id="checkbox_master">
                    <label for="checkbox_bachelor">Bachelor</label>
                    <input type="checkbox" name="degree" id="checkbox_bachelor">
                    <label for="checkbox_associate">Associate</label>
                    <input type="checkbox" name="degree" id="checkbox_associate">
                    <label for="checkbox_highschool">Highs School</label>
                    <input type="checkbox" name="degree" id="checkbox_highschool">
                </fieldset>
                <img class="form_check_icon" src="img/check_icon.png">
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center">
                <button class="btn btn-dark" type="reset">Reset</button>
                <button class="btn btn-info" type="submit">Submit</button>
            </td>
        </tr>
    </table>
</form>
</div>
<script>
    let number = 0;
    let counts = [];
    $(function () {

        $("#myform").submit(function () {
            //First Name, Last Name, Email, Location
            let first_name = $("input[name='first_name']").val();
            let last_name = $("input[name='last_name']").val();
            let email = $("input[name='email']").val();
            if (first_name==''){
                counts['first_name']=0;
                $(".form_check_icon").eq(0).show();
                $(".form_check_icon").eq(0).attr("src","img/check_icon_red.png");
            }else{
                counts['first_name']=1;
                $(".form_check_icon").eq(0).show();
                $(".form_check_icon").eq(0).attr("src","img/check_icon.png");
            }
            if (last_name==''){
                counts['last_name']=0;
                $(".form_check_icon").eq(1).show();
                $(".form_check_icon").eq(1).attr("src","img/check_icon_red.png");
            }else{
                counts['last_name']=1;
                $(".form_check_icon").eq(1).show();
                $(".form_check_icon").eq(1).attr("src","img/check_icon.png");
            }
            let is_valid_email = emailIsValid(email);
            if (is_valid_email==''){
                counts['email']=0;
                $(".form_check_icon").eq(2).show();
                $(".form_check_icon").eq(2).attr("src","img/check_icon_red.png");
            }else{
                counts['email']=1;
                $(".form_check_icon").eq(2).show();
                $(".form_check_icon").eq(2).attr("src","img/check_icon.png");
            }
            if (counts['first_name']===1){
                number+=10;
            }else{
                number-=10;
            }
            if (counts['last_name']===1){
                number+=10;
            }else{
                number-=10;
            }
            if (counts['email']===1){
                number+=10;
            }else{
                number-=10;
            }

            if (number<=0){
                number=0;
            }

            changeProgressBar(number);
        return false;
        });

        function changeProgressBar(number){
            $("#progressbar").progressbar({
                value: number
            });
        }

        function emailIsValid(email){
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email.toLowerCase());
        }


    });
</script>
</body>
</html>